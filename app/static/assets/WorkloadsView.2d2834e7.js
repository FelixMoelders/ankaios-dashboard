import{Q as p}from"./QInput.778e918d.js";import{Q as f,a as _}from"./QCard.116b3e75.js";import{Q as k}from"./QPage.b4618196.js";import{y as s,z as S,A as c,C as r,U as m,X as o,ad as u,ac as h,Y as d}from"./index.b8ed415a.js";import"./use-dark.b81f2878.js";const g={class:"row justify-between items-center q-pa-md"},N=r("div",{class:"text-h5"},"Workloads",-1),w={class:"q-pa-md row q-gutter-md"},v={class:"text-h6"},y={data(){return{search:"",workloads:[{instanceName:{workloadName:"Automatic_Climate_Control",agentName:"agent_A",id:"2c1588a6631024df16c430e551cf57da12045061731b34ba5010ae6792d4ced0"},executionState:{running:"RUNNING_OK"},tags:[{key:"Started by",value:"Driver"},{key:"Running in",value:"AC Unit"}]},{instanceName:{workloadName:"Smartphone_Music_Streaming",agentName:"agent_C",id:"d1cca59aa4563fc308d515457b9ed4f795ea9902e9206b7f4248425e45ef202f"},executionState:{pending:"PENDING_WAITING_TO_START"},tags:[{key:"Started by",value:"Rear Passenger"},{key:"Running in",value:"Infotainment"}]}]}},methods:{loadState(){fetch("/completeState").then(t=>t.json()).then(t=>{const n=t.response.completeState,l=t.response.completeState.desiredState.workloads,e=t.response.completeState.workloadStates;for(const a of e){const i=l[a.instanceName.workloadName];a.tags=i?i.tags:[]}this.workloads=e,console.log(this.workloadStates),this.desiredState=n.desiredState})}},computed:{filteredWorkloads(){return this.search?this.workloads.filter(t=>t.title.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase())):this.workloads}},mounted(){this.timer=setInterval(()=>{this.loadState()},2e3)},beforeUnmount(){clearInterval(this.timer)}},A=Object.assign(y,{name:"WorkloadsView"},{__name:"WorkloadsView",setup(t){return(n,l)=>(s(),S(k,{padding:""},{default:c(()=>[r("div",g,[N,m(p,{modelValue:n.search,"onUpdate:modelValue":l[0]||(l[0]=e=>n.search=e),placeholder:"Search...",filled:"",dense:"",debounce:"300"},null,8,["modelValue"])]),r("div",w,[(s(!0),o(h,null,u(n.filteredWorkloads,e=>(s(),o("div",{class:"col-md-3",key:e.instanceName.workloadName},[m(f,{class:"bg-gray-4"},{default:c(()=>[m(_,null,{default:c(()=>[r("div",v,d(e.instanceName.workloadName),1),r("div",null,d(e.instanceName.agentName),1),(s(!0),o(h,null,u(e.executionState,(a,i)=>(s(),o("div",{key:a},d(i),1))),128)),(s(!0),o(h,null,u(e.tags,a=>(s(),o("div",{key:a.key},[r("div",null,d(a.key)+" "+d(a.value),1)]))),128))]),_:2},1024)]),_:2},1024)]))),128))])]),_:1}))}});export{A as default};
