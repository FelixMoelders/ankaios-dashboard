import{Q as ft}from"./QPage.5c2d3599.js";import{S as q,r as ht,d as rt,t as gt}from"./transform.3121e527.js";import{E as V}from"./EventBus.62ac39c0.js";import{_ as it}from"./plugin-vue_export-helper.21dcd24c.js";import{v as at,H as dt,a4 as pt,x as yt,y as mt,A as xt,E as vt}from"./index.7f3c6808.js";class F extends Map{constructor(e,n=bt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(H(this,e))}has(e){return super.has(H(this,e))}set(e,n){return super.set(wt(this,e),n)}delete(e){return super.delete(_t(this,e))}}function H({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function wt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function _t({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function bt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function z(t){return typeof t=="string"?new q([[document.querySelector(t)]],[document.documentElement]):new q([[t]],ht)}function Nt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function K(t,e){if(t=Nt(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const kt={passive:!1},B={capture:!0,passive:!1};function X(t){t.stopImmediatePropagation()}function j(t){t.preventDefault(),t.stopImmediatePropagation()}function At(t){var e=t.document.documentElement,n=z(t).on("dragstart.drag",j,B);"onselectstart"in e?n.on("selectstart.drag",j,B):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Mt(t,e){var n=t.document.documentElement,r=z(t).on("dragstart.drag",null);e&&(r.on("click.drag",j,B),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var P=t=>()=>t;function Y(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:u,y:s,dx:h,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Y.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function St(t){return!t.ctrlKey&&!t.button}function $t(){return this.parentNode}function Dt(t,e){return e==null?{x:t.x,y:t.y}:e}function Et(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tt(){var t=St,e=$t,n=Dt,r=Et,i={},a=rt("start","drag","end"),u=0,s,h,p,y,v=0;function l(o){o.on("mousedown.drag",g).filter(r).on("touchstart.drag",c).on("touchmove.drag",d,kt).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(o,x){if(!(y||!t.call(this,o,x))){var b=_(this,e.call(this,o,x),o,x,"mouse");!b||(z(o.view).on("mousemove.drag",w,B).on("mouseup.drag",f,B),At(o.view),X(o),p=!1,s=o.clientX,h=o.clientY,b("start",o))}}function w(o){if(j(o),!p){var x=o.clientX-s,b=o.clientY-h;p=x*x+b*b>v}i.mouse("drag",o)}function f(o){z(o.view).on("mousemove.drag mouseup.drag",null),Mt(o.view,p),j(o),i.mouse("end",o)}function c(o,x){if(!!t.call(this,o,x)){var b=o.changedTouches,N=e.call(this,o,x),k=b.length,A,D;for(A=0;A<k;++A)(D=_(this,N,o,x,b[A].identifier,b[A]))&&(X(o),D("start",o,b[A]))}}function d(o){var x=o.changedTouches,b=x.length,N,k;for(N=0;N<b;++N)(k=i[x[N].identifier])&&(j(o),k("drag",o,x[N]))}function m(o){var x=o.changedTouches,b=x.length,N,k;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),N=0;N<b;++N)(k=i[x[N].identifier])&&(X(o),k("end",o,x[N]))}function _(o,x,b,N,k,A){var D=a.copy(),E=K(A||b,x),U,L,C;if((C=n.call(o,new Y("beforestart",{sourceEvent:b,target:l,identifier:k,active:u,x:E[0],y:E[1],dx:0,dy:0,dispatch:D}),N))!=null)return U=C.x-E[0]||0,L=C.y-E[1]||0,function ct(I,R,lt){var Q=E,G;switch(I){case"start":i[k]=ct,G=u++;break;case"end":delete i[k],--u;case"drag":E=K(lt||R,x),G=u;break}D.call(I,o,new Y(I,{sourceEvent:R,subject:C,target:l,identifier:k,active:G,x:E[0]+U,y:E[1]+L,dx:E[0]-Q[0],dy:E[1]-Q[1],dispatch:D}),N)}}return l.filter=function(o){return arguments.length?(t=typeof o=="function"?o:P(!!o),l):t},l.container=function(o){return arguments.length?(e=typeof o=="function"?o:P(o),l):e},l.subject=function(o){return arguments.length?(n=typeof o=="function"?o:P(o),l):n},l.touchable=function(o){return arguments.length?(r=typeof o=="function"?o:P(!!o),l):r},l.on=function(){var o=a.on.apply(a,arguments);return o===a?l:o},l.clickDistance=function(o){return arguments.length?(v=(o=+o)*o,l):Math.sqrt(v)},l}function jt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ot(this.cover(e,n),e,n,t)}function ot(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,u={data:r},s=t._x0,h=t._y0,p=t._x1,y=t._y1,v,l,g,w,f,c,d,m;if(!a)return t._root=u,t;for(;a.length;)if((f=e>=(v=(s+p)/2))?s=v:p=v,(c=n>=(l=(h+y)/2))?h=l:y=l,i=a,!(a=a[d=c<<1|f]))return i[d]=u,t;if(g=+t._x.call(null,a.data),w=+t._y.call(null,a.data),e===g&&n===w)return u.next=a,i?i[d]=u:t._root=u,t;do i=i?i[d]=new Array(4):t._root=new Array(4),(f=e>=(v=(s+p)/2))?s=v:p=v,(c=n>=(l=(h+y)/2))?h=l:y=l;while((d=c<<1|f)===(m=(w>=l)<<1|g>=v));return i[m]=a,i[d]=u,t}function zt(t){var e,n,r=t.length,i,a,u=new Array(r),s=new Array(r),h=1/0,p=1/0,y=-1/0,v=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(u[n]=i,s[n]=a,i<h&&(h=i),i>y&&(y=i),a<p&&(p=a),a>v&&(v=a));if(h>y||p>v)return this;for(this.cover(h,p).cover(y,v),n=0;n<r;++n)ot(this,u[n],s[n],t[n]);return this}function Bt(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var u=i-n||1,s=this._root,h,p;n>t||t>=i||r>e||e>=a;)switch(p=(e<r)<<1|t<n,h=new Array(4),h[p]=s,s=h,u*=2,p){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Ct(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Pt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function M(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function It(t,e,n){var r,i=this._x0,a=this._y0,u,s,h,p,y=this._x1,v=this._y1,l=[],g=this._root,w,f;for(g&&l.push(new M(g,i,a,y,v)),n==null?n=1/0:(i=t-n,a=e-n,y=t+n,v=e+n,n*=n);w=l.pop();)if(!(!(g=w.node)||(u=w.x0)>y||(s=w.y0)>v||(h=w.x1)<i||(p=w.y1)<a))if(g.length){var c=(u+h)/2,d=(s+p)/2;l.push(new M(g[3],c,d,h,p),new M(g[2],u,d,c,p),new M(g[1],c,s,h,d),new M(g[0],u,s,c,d)),(f=(e>=d)<<1|t>=c)&&(w=l[l.length-1],l[l.length-1]=l[l.length-1-f],l[l.length-1-f]=w)}else{var m=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),o=m*m+_*_;if(o<n){var x=Math.sqrt(n=o);i=t-x,a=e-x,y=t+x,v=e+x,r=g.data}}return r}function Gt(t){if(isNaN(y=+this._x.call(null,t))||isNaN(v=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,u=this._x0,s=this._y0,h=this._x1,p=this._y1,y,v,l,g,w,f,c,d;if(!n)return this;if(n.length)for(;;){if((w=y>=(l=(u+h)/2))?u=l:h=l,(f=v>=(g=(s+p)/2))?s=g:p=g,e=n,!(n=n[c=f<<1|w]))return this;if(!n.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(r=e,d=c)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[c]=a:delete e[c],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[d]=n:this._root=n),this):(this._root=a,this)}function Vt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Xt(){return this._root}function Yt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Ot(t){var e=[],n,r=this._root,i,a,u,s,h;for(r&&e.push(new M(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,u=n.y0,s=n.x1,h=n.y1)&&r.length){var p=(a+s)/2,y=(u+h)/2;(i=r[3])&&e.push(new M(i,p,y,s,h)),(i=r[2])&&e.push(new M(i,a,y,p,h)),(i=r[1])&&e.push(new M(i,p,u,s,y)),(i=r[0])&&e.push(new M(i,a,u,p,y))}return this}function Ut(t){var e=[],n=[],r;for(this._root&&e.push(new M(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,u=r.x0,s=r.y0,h=r.x1,p=r.y1,y=(u+h)/2,v=(s+p)/2;(a=i[0])&&e.push(new M(a,u,s,y,v)),(a=i[1])&&e.push(new M(a,y,s,h,v)),(a=i[2])&&e.push(new M(a,u,v,y,p)),(a=i[3])&&e.push(new M(a,y,v,h,p))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Lt(t){return t[0]}function Rt(t){return arguments.length?(this._x=t,this):this._x}function Qt(t){return t[1]}function qt(t){return arguments.length?(this._y=t,this):this._y}function st(t,e,n){var r=new O(e==null?Lt:e,n==null?Qt:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function O(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function W(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var S=st.prototype=O.prototype;S.copy=function(){var t=new O(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=W(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=W(r));return t};S.add=jt;S.addAll=zt;S.cover=Bt;S.data=Ct;S.extent=Pt;S.find=It;S.remove=Gt;S.removeAll=Vt;S.root=Xt;S.size=Yt;S.visit=Ot;S.visitAfter=Ut;S.x=Rt;S.y=qt;function $(t){return function(){return t}}function T(t){return(t()-.5)*1e-6}function Ft(t){return t.index}function J(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Ht(t){var e=Ft,n=v,r,i=$(30),a,u,s,h,p,y=1;t==null&&(t=[]);function v(c){return 1/Math.min(s[c.source.index],s[c.target.index])}function l(c){for(var d=0,m=t.length;d<y;++d)for(var _=0,o,x,b,N,k,A,D;_<m;++_)o=t[_],x=o.source,b=o.target,N=b.x+b.vx-x.x-x.vx||T(p),k=b.y+b.vy-x.y-x.vy||T(p),A=Math.sqrt(N*N+k*k),A=(A-a[_])/A*c*r[_],N*=A,k*=A,b.vx-=N*(D=h[_]),b.vy-=k*D,x.vx+=N*(D=1-D),x.vy+=k*D}function g(){if(!!u){var c,d=u.length,m=t.length,_=new Map(u.map((x,b)=>[e(x,b,u),x])),o;for(c=0,s=new Array(d);c<m;++c)o=t[c],o.index=c,typeof o.source!="object"&&(o.source=J(_,o.source)),typeof o.target!="object"&&(o.target=J(_,o.target)),s[o.source.index]=(s[o.source.index]||0)+1,s[o.target.index]=(s[o.target.index]||0)+1;for(c=0,h=new Array(m);c<m;++c)o=t[c],h[c]=s[o.source.index]/(s[o.source.index]+s[o.target.index]);r=new Array(m),w(),a=new Array(m),f()}}function w(){if(!!u)for(var c=0,d=t.length;c<d;++c)r[c]=+n(t[c],c,t)}function f(){if(!!u)for(var c=0,d=t.length;c<d;++c)a[c]=+i(t[c],c,t)}return l.initialize=function(c,d){u=c,p=d,g()},l.links=function(c){return arguments.length?(t=c,g(),l):t},l.id=function(c){return arguments.length?(e=c,l):e},l.iterations=function(c){return arguments.length?(y=+c,l):y},l.strength=function(c){return arguments.length?(n=typeof c=="function"?c:$(+c),w(),l):n},l.distance=function(c){return arguments.length?(i=typeof c=="function"?c:$(+c),f(),l):i},l}const Kt=1664525,Wt=1013904223,Z=4294967296;function Jt(){let t=1;return()=>(t=(Kt*t+Wt)%Z)/Z}function Zt(t){return t.x}function te(t){return t.y}var ee=10,ne=Math.PI*(3-Math.sqrt(5));function re(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,u=.6,s=new Map,h=gt(v),p=rt("tick","end"),y=Jt();t==null&&(t=[]);function v(){l(),p.call("tick",e),n<r&&(h.stop(),p.call("end",e))}function l(f){var c,d=t.length,m;f===void 0&&(f=1);for(var _=0;_<f;++_)for(n+=(a-n)*i,s.forEach(function(o){o(n)}),c=0;c<d;++c)m=t[c],m.fx==null?m.x+=m.vx*=u:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=u:(m.y=m.fy,m.vy=0);return e}function g(){for(var f=0,c=t.length,d;f<c;++f){if(d=t[f],d.index=f,d.fx!=null&&(d.x=d.fx),d.fy!=null&&(d.y=d.fy),isNaN(d.x)||isNaN(d.y)){var m=ee*Math.sqrt(.5+f),_=f*ne;d.x=m*Math.cos(_),d.y=m*Math.sin(_)}(isNaN(d.vx)||isNaN(d.vy))&&(d.vx=d.vy=0)}}function w(f){return f.initialize&&f.initialize(t,y),f}return g(),e={tick:l,restart:function(){return h.restart(v),e},stop:function(){return h.stop(),e},nodes:function(f){return arguments.length?(t=f,g(),s.forEach(w),e):t},alpha:function(f){return arguments.length?(n=+f,e):n},alphaMin:function(f){return arguments.length?(r=+f,e):r},alphaDecay:function(f){return arguments.length?(i=+f,e):+i},alphaTarget:function(f){return arguments.length?(a=+f,e):a},velocityDecay:function(f){return arguments.length?(u=1-f,e):1-u},randomSource:function(f){return arguments.length?(y=f,s.forEach(w),e):y},force:function(f,c){return arguments.length>1?(c==null?s.delete(f):s.set(f,w(c)),e):s.get(f)},find:function(f,c,d){var m=0,_=t.length,o,x,b,N,k;for(d==null?d=1/0:d*=d,m=0;m<_;++m)N=t[m],o=f-N.x,x=c-N.y,b=o*o+x*x,b<d&&(k=N,d=b);return k},on:function(f,c){return arguments.length>1?(p.on(f,c),e):p.on(f)}}}function ie(){var t,e,n,r,i=$(-30),a,u=1,s=1/0,h=.81;function p(g){var w,f=t.length,c=st(t,Zt,te).visitAfter(v);for(r=g,w=0;w<f;++w)e=t[w],c.visit(l)}function y(){if(!!t){var g,w=t.length,f;for(a=new Array(w),g=0;g<w;++g)f=t[g],a[f.index]=+i(f,g,t)}}function v(g){var w=0,f,c,d=0,m,_,o;if(g.length){for(m=_=o=0;o<4;++o)(f=g[o])&&(c=Math.abs(f.value))&&(w+=f.value,d+=c,m+=c*f.x,_+=c*f.y);g.x=m/d,g.y=_/d}else{f=g,f.x=f.data.x,f.y=f.data.y;do w+=a[f.data.index];while(f=f.next)}g.value=w}function l(g,w,f,c){if(!g.value)return!0;var d=g.x-e.x,m=g.y-e.y,_=c-w,o=d*d+m*m;if(_*_/h<o)return o<s&&(d===0&&(d=T(n),o+=d*d),m===0&&(m=T(n),o+=m*m),o<u&&(o=Math.sqrt(u*o)),e.vx+=d*g.value*r/o,e.vy+=m*g.value*r/o),!0;if(g.length||o>=s)return;(g.data!==e||g.next)&&(d===0&&(d=T(n),o+=d*d),m===0&&(m=T(n),o+=m*m),o<u&&(o=Math.sqrt(u*o)));do g.data!==e&&(_=a[g.data.index]*r/o,e.vx+=d*_,e.vy+=m*_);while(g=g.next)}return p.initialize=function(g,w){t=g,n=w,y()},p.strength=function(g){return arguments.length?(i=typeof g=="function"?g:$(+g),y(),p):i},p.distanceMin=function(g){return arguments.length?(u=g*g,p):Math.sqrt(u)},p.distanceMax=function(g){return arguments.length?(s=g*g,p):Math.sqrt(s)},p.theta=function(g){return arguments.length?(h=g*g,p):Math.sqrt(h)},p}function ae(t){var e=$(.1),n,r,i;typeof t!="function"&&(t=$(t==null?0:+t));function a(s){for(var h=0,p=n.length,y;h<p;++h)y=n[h],y.vx+=(i[h]-y.x)*r[h]*s}function u(){if(!!n){var s,h=n.length;for(r=new Array(h),i=new Array(h),s=0;s<h;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,u()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:$(+s),u(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:$(+s),u(),a):t},a}function oe(t){var e=$(.1),n,r,i;typeof t!="function"&&(t=$(t==null?0:+t));function a(s){for(var h=0,p=n.length,y;h<p;++h)y=n[h],y.vy+=(i[h]-y.y)*r[h]*s}function u(){if(!!n){var s,h=n.length;for(r=new Array(h),i=new Array(h),s=0;s<h;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,u()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:$(+s),u(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:$(+s),u(),a):t},a}function se(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const tt=Symbol("implicit");function ut(){var t=new F,e=[],n=[],r=tt;function i(a){let u=t.get(a);if(u===void 0){if(r!==tt)return r;t.set(a,u=e.push(a)-1)}return n[u%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new F;for(const u of a)t.has(u)||t.set(u,e.push(u)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ut(e,n).unknown(r)},se.apply(i,arguments),i}function et(t){function e(i,a){i.active||t.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}function n(i,a){a.fx=i.x,a.fy=i.y}function r(i,a){i.active||t.alphaTarget(0),a.fx=null,a.fy=null}return Tt().on("start",e).on("drag",n).on("end",r)}function nt(t){const e=Math.hypot(t.target.x-t.source.x,t.target.y-t.source.y);return`
    M${t.source.x},${t.source.y}
    A${e},${e} 0 0,1 ${t.target.x},${t.target.y}
  `}const ue={props:{dependencies:Array},mounted(){this.drawDependencyGraph()},watch:{dependencies(){this.drawDependencyGraph()}},methods:{drawDependencyGraph(){console.log(this.dependencies);const t=1500,e=1e3,n=Array.from(new Set(this.dependencies.map(l=>l.type))).sort(),r=Array.from(new Set(this.dependencies.flatMap(l=>[l.source,l.target])),l=>({id:l})),i=this.dependencies.map(l=>Object.create(l)),u=ut(n,["#C10015","#21BA45"]);z("svg").selectAll("*").remove();const s=re(r).force("link",Ht(i).id(l=>l.id).distance(100)).force("charge",ie().strength(-800)).force("x",ae()).force("y",oe()),h=z("svg").attr("viewBox",[-t/2,-e/2,t,e]).attr("width",t).attr("height",e).attr("style","max-width: 100%; height: auto; font: 18px sans-serif;");var p=h.selectAll(".legend").data(u.domain()).enter().append("g").attr("class","legend").attr("transform",function(l,g){return"translate(0,"+g*20+")"});p.append("rect").attr("x",-750).attr("width",18).attr("height",18).style("fill",u),p.append("text").attr("x",-725).attr("y",9).attr("dy",".35em").text(function(l){return l}),h.append("defs").selectAll("marker").data(n).join("marker").attr("id",l=>`arrow-${l}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill",u).attr("d","M0,-5L10,0L0,5");const y=h.append("g").attr("fill","none").attr("stroke-width",3).selectAll("path").data(i).join("path").attr("stroke",l=>u(l.type)).attr("marker-end",l=>`url(${new URL(`#arrow-${l.type}`,location)})`),v=h.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(r).join("g").call(et(s));v.append("circle").attr("stroke","white").attr("stroke-width",1.5).attr("r",8),v.append("text").attr("x",12).attr("y","0.31em").text(l=>l.id).clone(!0).lower().attr("fill","none").attr("stroke","white").attr("stroke-width",3),s.on("tick",()=>{y.attr("d",nt),v.attr("transform",l=>`translate(${l.x},${l.y})`)}),console.log(this.dependencies)},linkArc:nt,drag:et}};function ce(t,e,n,r,i,a){return at(),dt("svg")}var le=it(ue,[["render",ce]]);const fe={components:{DependencyGraph:le},data(){return{dependencies:[]}},methods:{loadState(){fetch("/completeState").then(t=>t.ok?t.json():(t.status==405&&(console.log("User not logged in. Changing to Login Page."),this.changeView("login")),Promise.reject(t))).then(t=>{let e=null,n=null,r=null;if(t&&t.response&&t.response.completeState&&(e=t.response.completeState,t.response.completeState.desiredState&&(n=t.response.completeState.desiredState.workloads),r=t.response.completeState.workloadStates),r&&n){for(const i of r){const a=n[i.instanceName.workloadName];i.tags=[],a&&"tags"in a&&(i.tags=a.tags)}this.workloadStates=r.sort((i,a)=>i.instanceName.workloadName.localeCompare(a.instanceName.workloadName))}if(e&&e.desiredState&&(this.desiredState=e.desiredState),n){const i=[];for(let[a,u]of Object.entries(n))if("dependencies"in u)for(let[s,h]of Object.entries(u.dependencies))i.push({source:a,target:s,type:h});V.emit("update-dependencies",i),console.log(i)}}).catch(t=>{console.log("There has been a problem with your fetch operation: ",t.message)})}},mounted(){this.loadState(),V.on("update-dependencies",function(t){this.dependencies=t}.bind(this))},beforeUnmount(){V.off("update-dependencies")}};function he(t,e,n,r,i,a){const u=pt("DependencyGraph");return at(),yt(ft,{class:"flex flex-center"},{default:mt(()=>[xt("div",null,[vt(u,{dependencies:i.dependencies},null,8,["dependencies"])])]),_:1})}var xe=it(fe,[["render",he]]);export{xe as default};
