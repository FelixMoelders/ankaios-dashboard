import{e as _,Q as f,d as k}from"./QCard.e6310f29.js";import{Q as p}from"./QPage.59075cda.js";import{y as s,z as S,A as c,C as n,U as m,a7 as o,a9 as u,a8 as h,ac as d}from"./index.98ae7f60.js";const g={class:"row justify-between items-center q-pa-md"},N=n("div",{class:"text-h5"},"Workloads",-1),w={class:"q-pa-md row q-gutter-md"},v={class:"text-h6"},y={data(){return{search:"",workloads:[{instanceName:{workloadName:"Automatic_Climate_Control",agentName:"agent_A",id:"2c1588a6631024df16c430e551cf57da12045061731b34ba5010ae6792d4ced0"},executionState:{running:"RUNNING_OK"},tags:[{key:"Started by",value:"Driver"},{key:"Running in",value:"AC Unit"}]},{instanceName:{workloadName:"Smartphone_Music_Streaming",agentName:"agent_C",id:"d1cca59aa4563fc308d515457b9ed4f795ea9902e9206b7f4248425e45ef202f"},executionState:{pending:"PENDING_WAITING_TO_START"},tags:[{key:"Started by",value:"Rear Passenger"},{key:"Running in",value:"Infotainment"}]}]}},methods:{loadState(){fetch("/completeState").then(t=>t.json()).then(t=>{const r=t.response.completeState,l=t.response.completeState.desiredState.workloads,e=t.response.completeState.workloadStates;for(const a of e){const i=l[a.instanceName.workloadName];a.tags=i?i.tags:[]}this.workloads=e,console.log(this.workloadStates),this.desiredState=r.desiredState})}},computed:{filteredWorkloads(){return this.search?this.workloads.filter(t=>t.title.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase())):this.workloads}},mounted(){this.timer=setInterval(()=>{this.loadState()},2e3)},beforeUnmount(){clearInterval(this.timer)}},V=Object.assign(y,{name:"WorkloadsView"},{__name:"WorkloadsView",setup(t){return(r,l)=>(s(),S(p,{padding:""},{default:c(()=>[n("div",g,[N,m(_,{modelValue:r.search,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search=e),placeholder:"Search...",filled:"",dense:"",debounce:"300"},null,8,["modelValue"])]),n("div",w,[(s(!0),o(h,null,u(r.filteredWorkloads,e=>(s(),o("div",{class:"col-md-3",key:e.instanceName.workloadName},[m(f,{class:"bg-gray-4"},{default:c(()=>[m(k,null,{default:c(()=>[n("div",v,d(e.instanceName.workloadName),1),n("div",null,d(e.instanceName.agentName),1),(s(!0),o(h,null,u(e.executionState,(a,i)=>(s(),o("div",{key:a},d(i),1))),128)),(s(!0),o(h,null,u(e.tags,a=>(s(),o("div",{key:a.key},[n("div",null,d(a.key)+" "+d(a.value),1)]))),128))]),_:2},1024)]),_:2},1024)]))),128))])]),_:1}))}});export{V as default};
